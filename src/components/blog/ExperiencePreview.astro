---
import type { CollectionEntry } from "astro:content";
import { getPostSortDate } from "@/data/post";
import type { HTMLTag, Polymorphic } from "astro/types";
import FormattedDate from "../FormattedDate.astro";

type Props<Tag extends HTMLTag> = Polymorphic<{ as: Tag }> & {
	post: CollectionEntry<"post">;
	withDesc?: boolean;
};

const { as: Tag = "div", post, withDesc = false } = Astro.props;
/*const postDate = getPostSortDate(post);*/
---

<Tag class="flex items-center space-x-3.5 p-1.5">
    <div class="flex-shrink-0 mr-4"> 
        <a class="cactus-link" data-astro-prefetch href={post.href}>
            <img 
                class="h-14 w-14 object-contain themed-image"
                src={`/experiences/white/${post.image}`}
                data-light-src={`/experiences/black/${post.image}`}
                data-dark-src={`/experiences/white/${post.image}`}
                alt={post.title} 
            />
        </a>
    </div>
    <div class="flex-grow">
        <h3 class="line-clamp-3 font-bold mb-1 text-sm">{post.pos}</h3>
        <p class="line-clamp-3 text-xs">{post.desc}</p>
    </div>
</Tag>
